<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.sajo.contribution">
	

<!-- conNum의 최대값 -->
<select id="maxNum" resultType="int">
	select nvl(max(conNum),0) from contribution	
</select>


<!-- contribution  -->
<insert id="insertData" parameterType="com.sajo.dto.ContributionDTO">
	insert into contribution (conNum,gnum,gno,userId,grecomm,boardName)
	values (#{conNum},#{gNum},#{gno},#{userId},0,#{boardName})
</insert>


<!-- contribution 업데이트 -->
<update id="updateContribution" parameterType="int">
	update contribution set grecomm=grecomm+1 where gNum=#{gNum}
</update>

<!-- contribution check -->
<select id="checkContribution" parameterType="int" resultType="int">
	select sum(grecomm) from contribution where gNum=#{gNum}
</select>
	
</mapper>